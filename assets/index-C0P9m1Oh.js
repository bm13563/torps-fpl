import{a as G}from"../js/vendor/styled-BqWM25Q9.js";import{i as B}from"../js/vendor/themes-DL8JkT7U.js";import{T as F,c as I}from"../js/vendor/runtime-dom-BvLmSSPw.js";import{b as W,o as d,e as p,f as H,q as P,i as j,v as S,l as L,c as _,F as q,p as Y,n as A,k as z,h,g as b,E as K,G as J}from"../js/vendor/runtime-core-DoRzylV4.js";import{u as Q,a as X,c as Z,b as ee}from"../js/vendor/dist-C88g3-rY.js";import{s as te}from"../js/vendor/toggleswitch-C8JmuZIe.js";import{s as ae}from"../js/vendor/selectbutton-Br1r2xrs.js";import{s as oe}from"../js/vendor/progressspinner-Bx9O0l11.js";import{s as se}from"../js/vendor/select-BWrUJfyJ.js";import{d as re}from"../js/vendor/lib-oVxhnyrt.js";import{s as le}from"../js/vendor/column-Co2Vzgvz.js";import{s as ne}from"../js/vendor/datatable-BbqIBYWE.js";import{u as r,r as w}from"../js/vendor/reactivity-D6IM_JfZ.js";import{n as ie,t as de}from"../js/vendor/shared-7YLTi_yj.js";import{P as ue}from"../js/vendor/core-CJpRk7Fj.js";import"../js/vendor/utils-CXbrStuA.js";import"../js/vendor/ripple-BIQ-muY0.js";import"../js/vendor/togglebutton-uWCT0nUK.js";import"../js/vendor/icons-BN5at8iK.js";import"../js/vendor/iconfield-CVN_TpsV.js";import"../js/vendor/inputicon-VOf-tfgS.js";import"../js/vendor/inputtext-BUXmIB2J.js";import"../js/vendor/overlayeventbus-BSK1J2z9.js";import"../js/vendor/portal-GLqwUOXE.js";import"../js/vendor/virtualscroller-l6-zMOal.js";import"../js/vendor/paginator-BCxcZWtY.js";import"../js/vendor/inputnumber-Ds8UoMSE.js";import"../js/vendor/button-dlEjI5yk.js";import"../js/vendor/badge-BEUJHQju.js";import"../js/vendor/checkbox-D5XihlPe.js";import"../js/vendor/radiobutton-AbL4smkK.js";import"../js/vendor/focustrap-UtE9CV8t.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function l(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function s(e){if(e.ep)return;e.ep=!0;const t=l(e);fetch(e.href,t)}})();const V=(a,o)=>{const l=a.__vccOpts||a;for(const[s,e]of o)l[s]=e;return l},ce={};function fe(a,o){const l=W("router-view");return d(),p(l,null,{default:H(({Component:s,route:e})=>[P(F,{name:e.name==="team-picker"?"modal":"page",mode:"out-in"},{default:H(()=>[(d(),p(j(s)))]),_:2},1032,["name"])]),_:1})}const pe=V(ce,[["render",fe]]),me="/torps-fpl/assets/torps_logo-DaOS8Yjd.png",he={__name:"Table",props:["data","columns","tableHeight","display","sortable"],setup(a){const o=a,l=S(()=>({itemSize:39,appendOnly:!1,showLoader:!1,delay:0})),s=S(()=>{var t;return`table-${((t=o.data)==null?void 0:t.length)||0}-${o.display?"visible":"hidden"}`}),e=()=>{A(()=>{var u;const t=document.querySelector(".p-datatable");t&&t.__vue__&&((u=t.__vue__.virtualScroller)==null||u.refresh())})};return L(()=>o.data,()=>{A(()=>{const t=document.querySelector(".p-virtualscroller");t&&t.__vue__&&t.__vue__.refresh()})},{flush:"post"}),(t,u)=>(d(),_("div",{class:ie({hidden:!a.display})},[(d(),p(r(ne),{value:a.data,scrollable:"",scrollHeight:`${o.tableHeight}px`,"virtual-scroller-options":l.value,key:s.value,onVirtualScrollerOptions:e},{default:H(()=>[(d(!0),_(q,null,Y(a.columns,f=>(d(),p(r(le),{key:f.field,field:f.field,header:f.header,frozen:f.field==="player",sortable:a.sortable},null,8,["field","header","frozen","sortable"]))),128))]),_:1},8,["value","scrollHeight","virtual-scroller-options"]))],2))}},k=V(he,[["__scopeId","data-v-a46d3e23"]]),M=a=>(a="/torps-fpl/"+a,new Promise((o,l)=>{fetch(a).then(s=>{if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);return s.json()}).then(s=>{o(s)}).catch(s=>{l(s)})})),ye=a=>{const o=a.replace("/","_");return M(`${o}_render_players.json`)},ge=a=>{const o=a.replace("/","_");return M(`${o}_render_teams.json`)},ve=()=>M("last_updated.json"),x=a=>(K("data-v-3534336e"),a=a(),J(),a),_e={class:"container"},be={class:"title"},we=x(()=>h("img",{src:me,alt:"logo"},null,-1)),Pe={class:"text"},Se=x(()=>h("h1",null,"Torps Fantasy League",-1)),Oe={class:"actions"},Te={key:0,class:"show-extended"},ke=x(()=>h("p",null,"All data",-1)),D=["Players","Teams"],N=["25/26","24/25"],He=[{field:"rank",header:"Rank",default:!0},{field:"name",header:"Team Name",default:!0},{field:"owner",header:"Owner",default:!0},{field:"GW Points",header:"Points",default:!0},{field:"Total Points",header:"Total",default:!0}],U=[{field:"player",header:"Player",default:!0},{field:"position",header:"Position",default:!1},{field:"games",header:"Games",default:!0},{field:"Goals",header:"Goals",default:!0},{field:"Assists",header:"Assists",default:!0},{field:"Wins",header:"Wins",default:!1},{field:"Losses",header:"Losses",default:!1},{field:"Draws",header:"Draws",default:!1},{field:"Minutes Played",header:"Minutes",default:!1},{field:"MOTM Votes",header:"Votes",default:!1},{field:"Yellow Cards",header:"Yellows",default:!1},{field:"Red Cards",header:"Reds",default:!1},{field:"Own Goals",header:"Own Goals",default:!1},{field:"Clean Sheet",header:"Clean Sheets",default:!1},{field:"Penalty Saves",header:"Penalty Saves",default:!1},{field:"GW Points",header:"Points",default:!0},{field:"Points",header:"Total",default:!0}],Le=U.filter(a=>a.default),Ve={__name:"Main",setup(a){const o=Q(),l=X();let s,e,t,u,f=[];const O=w(!0),y=w(o.query.tab||D[0]),c=w(o.query.season||N[0]),g=w(window.innerHeight>768),m=S(()=>y.value==="Players"),C=S(()=>!e||e.length===0||e.every(n=>!n.name||!n.owner)),R=()=>{const n=document.querySelector(".actions").getBoundingClientRect().bottom;return window.visualViewport.height-n-32},T=(n,i)=>n||f.includes(i)?(f.includes(i)||f.push(i),!0):!1,E=async()=>{O.value=!0,s=await ye(c.value),e=await ge(c.value),e=e.map((n,i)=>({...n,rank:i+1})),O.value=!1};return L(y,n=>{l.push({query:{tab:n,season:c.value}})}),L(c,async n=>{l.push({query:{tab:y.value,season:n}}),await E()}),z(async()=>{u=R(),await E(),t=await ve(),t=new Date(t.lastUpdated),l.push({query:{tab:y.value,season:c.value}})}),(n,i)=>(d(),_("div",_e,[h("div",be,[we,h("span",Pe,[Se,h("p",null,"Last updated: "+de(r(t)?r(re)(r(t),"yyyy-mm-dd HH:MM"):""),1)])]),P(r(ae),{modelValue:y.value,"onUpdate:modelValue":i[0]||(i[0]=v=>y.value=v),options:D,allowEmpty:!1,class:"selector"},null,8,["modelValue"]),h("div",Oe,[P(r(se),{modelValue:c.value,"onUpdate:modelValue":i[1]||(i[1]=v=>c.value=v),options:N,allowEmpty:!1},null,8,["modelValue"]),m.value?(d(),_("div",Te,[ke,P(r(te),{modelValue:g.value,"onUpdate:modelValue":i[2]||(i[2]=v=>g.value=v)},null,8,["modelValue"])])):b("",!0)]),O.value?(d(),p(r(oe),{key:0,style:{width:"50px",height:"50px"},strokeWidth:"4",fill:"transparent",animationDuration:".5s"})):(d(),_(q,{key:1},[T(m.value&&g.value,"playersExtended")?(d(),p(k,{key:0,data:r(s),columns:U,tableHeight:r(u),display:m.value&&g.value,sortable:!0},null,8,["data","tableHeight","display"])):b("",!0),T(m.value&&!g.value,"playersDefault")?(d(),p(k,{key:1,data:r(s),columns:r(Le),tableHeight:r(u),display:m.value&&!g.value,sortable:!1},null,8,["data","columns","tableHeight","display"])):b("",!0),T(!m.value&&(!C.value||c.value!=="25/26"),"teams")?(d(),p(k,{key:2,data:r(e),columns:He,tableHeight:r(u),display:!m.value&&(!C.value||c.value!=="25/26"),sortable:!1},null,8,["data","tableHeight","display"])):b("",!0)],64))]))}},Me=V(Ve,[["__scopeId","data-v-3534336e"]]),xe=[{path:"/",name:"main",component:Me},{path:"/team-picker",redirect:"/"}],$e=Z({history:ee(),routes:xe}),Ce=G(B,{semantic:{transitionDuration:"0.05s",primary:{50:"{orange.50}",100:"{orange.100}",200:"{orange.200}",300:"{orange.300}",400:"{orange.400}",500:"{orange.500}",600:"{orange.600}",700:"{orange.700}",800:"{orange.800}",900:"{orange.900}",950:"{orange.950}"},colorScheme:{light:{surface:{0:"#fffdf9",50:"{orange.50}",100:"{orange.100}",200:"{orange.200}",300:"{orange.300}",400:"{orange.400}",500:"{orange.500}",600:"{orange.600}",700:"{orange.700}",800:"{orange.800}",900:"{orange.900}",950:"{orange.950}"},formField:{disabledBackground:"#f5f5f5",disabledColor:"#b3b3b3"},text:{color:"#000"}}}}}),$=I(pe);$.use($e);$.mount("#app");$.use(ue,{theme:{preset:Ce,options:{darkModeSelector:".fake-dark-selector"}}});
