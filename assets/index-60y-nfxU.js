import{a as ie}from"../js/vendor/styled-DSgQuI8p.js";import{i as de}from"../js/vendor/themes-DL8JkT7U.js";import{T as ue,c as ce}from"../js/vendor/runtime-dom-D2rHkHyt.js";import{b as me,o as h,e as w,f as Y,q as S,i as pe,v as P,l as H,c as x,F as z,p as fe,n as q,k as j,h as s,g as C,E as D,G,H as ve,I as he,a as ye}from"../js/vendor/runtime-core-CLCFghaB.js";import{u as K,a as Q,c as ge,b as be}from"../js/vendor/dist-BEUu8mYj.js";import{s as ae}from"../js/vendor/toggleswitch-B_o29054.js";import{s as te}from"../js/vendor/selectbutton-jVTfnSnZ.js";import{s as _e}from"../js/vendor/progressspinner-DRSgVLeH.js";import{s as I}from"../js/vendor/select-Bt15X5LU.js";import{d as $e}from"../js/vendor/lib-oVxhnyrt.js";import{s as ke}from"../js/vendor/column-DAq-S_4d.js";import{s as Pe}from"../js/vendor/datatable-BsulQdTj.js";import{u,r as N}from"../js/vendor/reactivity-D6IM_JfZ.js";import{n as le,t as L,b as Se}from"../js/vendor/shared-7YLTi_yj.js";import{s as se}from"../js/vendor/button-o3ALGm7c.js";import{s as Te}from"../js/vendor/inputtext-CihFUKkG.js";import{s as B}from"../js/vendor/multiselect-DwLn-AKn.js";import{P as we}from"../js/vendor/core-Dv4hUPYy.js";import"../js/vendor/utils-DJmc-F4Z.js";import"../js/vendor/ripple-C75__z6m.js";import"../js/vendor/togglebutton-DH3e6DXq.js";import"../js/vendor/icons-CQJmC05a.js";import"../js/vendor/iconfield-DczCJfCH.js";import"../js/vendor/inputicon-DjKu-Rkc.js";import"../js/vendor/overlayeventbus-CKr6vRte.js";import"../js/vendor/portal-DoHX-JLU.js";import"../js/vendor/virtualscroller-BNWXBj8d.js";import"../js/vendor/paginator-DE1mls4Q.js";import"../js/vendor/inputnumber-D-eBD2vm.js";import"../js/vendor/checkbox-wGflomnd.js";import"../js/vendor/radiobutton-DBSNiy_y.js";import"../js/vendor/focustrap-hjtdMeGG.js";import"../js/vendor/badge-Cj11s3ra.js";import"../js/vendor/chip-CoFJClcR.js";(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))i(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function c(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerPolicy&&(n.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?n.credentials="include":e.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(e){if(e.ep)return;e.ep=!0;const n=c(e);fetch(e.href,n)}})();const A=(r,d)=>{const c=r.__vccOpts||r;for(const[i,e]of d)c[i]=e;return c},Ne={};function Ve(r,d){const c=me("router-view");return h(),w(c,null,{default:Y(({Component:i,route:e})=>[S(ue,{name:e.name==="team-picker"?"modal":"page",mode:"out-in"},{default:Y(()=>[(h(),w(pe(i)))]),_:2},1032,["name"])]),_:1})}const Ce=A(Ne,[["render",Ve]]),oe="/torps-fpl/assets/torps_logo-DaOS8Yjd.png",xe={__name:"Table",props:["data","columns","tableHeight","display","sortable"],setup(r){const d=r,c=P(()=>({itemSize:39,appendOnly:!1,showLoader:!1,delay:0})),i=P(()=>{var n;return`table-${((n=d.data)==null?void 0:n.length)||0}-${d.display?"visible":"hidden"}`}),e=()=>{q(()=>{var p;const n=document.querySelector(".p-datatable");n&&n.__vue__&&((p=n.__vue__.virtualScroller)==null||p.refresh())})};return H(()=>d.data,()=>{q(()=>{const n=document.querySelector(".p-virtualscroller");n&&n.__vue__&&n.__vue__.refresh()})},{flush:"post"}),(n,p)=>(h(),x("div",{class:le({hidden:!r.display})},[(h(),w(u(Pe),{value:r.data,scrollable:"",scrollHeight:`${d.tableHeight}px`,"virtual-scroller-options":c.value,key:i.value,onVirtualScrollerOptions:e},{default:Y(()=>[(h(!0),x(z,null,fe(r.columns,y=>(h(),w(u(ke),{key:y.field,field:y.field,header:y.header,frozen:y.field==="player",sortable:r.sortable},null,8,["field","header","frozen","sortable"]))),128))]),_:1},8,["value","scrollHeight","virtual-scroller-options"]))],2))}},R=A(xe,[["__scopeId","data-v-a46d3e23"]]),J=r=>(r="/torps-fpl/"+r,new Promise((d,c)=>{fetch(r).then(i=>{if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return i.json()}).then(i=>{d(i)}).catch(i=>{c(i)})})),Ee=r=>{const d=r.replace("/","_");return J(`${d}_render_players.json`)},Me=r=>{const d=r.replace("/","_");return J(`${d}_render_teams.json`)},Le=()=>J("last_updated.json"),U=r=>(D("data-v-1e2b66f0"),r=r(),G(),r),Oe={class:"container"},He={class:"title"},Ae=U(()=>s("img",{src:oe,alt:"logo"},null,-1)),Fe={class:"text"},Ie=U(()=>s("h1",null,"Torps Fantasy League",-1)),Re={class:"actions"},Ue={key:0,class:"show-extended"},qe=U(()=>s("p",null,"All data",-1)),De=U(()=>s("h3",null,"Entries Open!",-1)),Ge=U(()=>s("p",null,"Please submit your teams for the 25/26 season.",-1)),Z=["Players","Teams"],ee=["25/26","24/25"],We=[{field:"rank",header:"Rank",default:!0},{field:"name",header:"Team Name",default:!0},{field:"owner",header:"Owner",default:!0},{field:"GW Points",header:"Points",default:!0},{field:"Total Points",header:"Total",default:!0}],re=[{field:"Player",header:"Player",default:!0},{field:"Position",header:"Position",default:!1},{field:"Games",header:"Games",default:!0},{field:"Goals",header:"Goals",default:!0},{field:"Assists",header:"Assists",default:!0},{field:"Wins",header:"Wins",default:!1},{field:"Losses",header:"Losses",default:!1},{field:"Draws",header:"Draws",default:!1},{field:"Minutes Played",header:"Minutes",default:!1},{field:"MOTM Votes",header:"Votes",default:!1},{field:"Yellow Cards",header:"Yellows",default:!1},{field:"Red Cards",header:"Reds",default:!1},{field:"Own Goals",header:"Own Goals",default:!1},{field:"Clean Sheet",header:"Clean Sheets",default:!1},{field:"Penalty Saves",header:"Penalty Saves",default:!1},{field:"GW Points",header:"Points",default:!0},{field:"Points",header:"Total",default:!0}],Be=re.filter(r=>r.default),Ye={__name:"Main",setup(r){const d=K(),c=Q();let i,e,n,p,y=[];const $=N(!0),k=N(d.query.tab||Z[0]),o=N(d.query.season||ee[0]),g=N(window.innerHeight>768),m=P(()=>k.value==="Players"),V=P(()=>!e||e.length===0||e.every(a=>!a.name||!a.owner)),E=()=>{const a=document.querySelector(".actions").getBoundingClientRect().bottom;return window.visualViewport.height-a-32},_=(a,t)=>a||y.includes(t)?(y.includes(t)||y.push(t),!0):!1,f=()=>{c.push("/team-picker")},l=async()=>{$.value=!0,i=await Ee(o.value),e=await Me(o.value),e=e.map((a,t)=>({...a,rank:t+1})),$.value=!1};return H(k,a=>{c.push({query:{tab:a,season:o.value}})}),H(o,async a=>{c.push({query:{tab:k.value,season:a}}),await l()}),j(async()=>{p=E(),await l(),n=await Le(),n=new Date(n.lastUpdated),c.push({query:{tab:k.value,season:o.value}})}),(a,t)=>(h(),x("div",Oe,[s("div",He,[Ae,s("span",Fe,[Ie,s("p",null,"Last updated: "+L(u(n)?u($e)(u(n),"yyyy-mm-dd HH:MM"):""),1)])]),S(u(te),{modelValue:k.value,"onUpdate:modelValue":t[0]||(t[0]=v=>k.value=v),options:Z,allowEmpty:!1,class:"selector"},null,8,["modelValue"]),s("div",Re,[S(u(I),{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=v=>o.value=v),options:ee,allowEmpty:!1},null,8,["modelValue"]),m.value?(h(),x("div",Ue,[qe,S(u(ae),{modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=v=>g.value=v)},null,8,["modelValue"])])):C("",!0)]),$.value?(h(),w(u(_e),{key:0,style:{width:"50px",height:"50px"},strokeWidth:"4",fill:"transparent",animationDuration:".5s"})):(h(),x(z,{key:1},[_(m.value&&g.value,"playersExtended")?(h(),w(R,{key:0,data:u(i),columns:re,tableHeight:u(p),display:m.value&&g.value,sortable:!0},null,8,["data","tableHeight","display"])):C("",!0),_(m.value&&!g.value,"playersDefault")?(h(),w(R,{key:1,data:u(i),columns:u(Be),tableHeight:u(p),display:m.value&&!g.value,sortable:!1},null,8,["data","columns","tableHeight","display"])):C("",!0),!m.value&&o.value==="25/26"?(h(),x("div",{key:2,class:"coming-soon",style:Se({height:u(p)+"px"})},[De,Ge,o.value==="25/26"?(h(),w(u(se),{key:0,label:"Build Team",icon:"pi pi-users",onClick:f,class:"team-picker-btn"})):C("",!0)],4)):C("",!0),_(!m.value&&(!V.value||o.value!=="25/26"),"teams")?(h(),w(R,{key:3,data:u(e),columns:We,tableHeight:u(p),display:!m.value&&(!V.value||o.value!=="25/26"),sortable:!1},null,8,["data","tableHeight","display"])):C("",!0)],64))]))}},ze=A(Ye,[["__scopeId","data-v-1e2b66f0"]]),je={},Ke={class:"rules-container"},Qe=ve('<div class="rules-content" data-v-48e46b95><div class="rule-card" data-v-48e46b95><h3 data-v-48e46b95>Team Selection</h3><ul data-v-48e46b95><li data-v-48e46b95>Pick 11 players from a £100 budget</li><li data-v-48e46b95>At least 1 NEW player required</li><li data-v-48e46b95>At least 1 player from each team (1, 2, 3, 4)</li><li data-v-48e46b95>No more than 4 players from a single team</li><li data-v-48e46b95>You cannot pick yourself</li></ul></div><div class="rule-card" data-v-48e46b95><h3 data-v-48e46b95>Captain &amp; 12th Man</h3><ul data-v-48e46b95><li data-v-48e46b95>Pick a captain who scores 2x points</li><li data-v-48e46b95>Cannot captain yourself/12th man</li><li data-v-48e46b95>You are your team&#39;s 12th man (free)</li><li data-v-48e46b95>If not playing, pick a NEW player as 12th man</li></ul></div><div class="rule-card" data-v-48e46b95><h3 data-v-48e46b95>Prizes</h3><ul data-v-48e46b95><li data-v-48e46b95><strong data-v-48e46b95>1st:</strong> 2/3 of prize pot</li><li data-v-48e46b95><strong data-v-48e46b95>2nd:</strong> Potentially Club Kit</li><li data-v-48e46b95><strong data-v-48e46b95>3rd:</strong> TBD</li></ul><p class="prize-note" data-v-48e46b95>£175 rollover guaranteed + Second Chance League</p></div><div class="rule-card" data-v-48e46b95><h3 data-v-48e46b95>How Players Score Points</h3><ul data-v-48e46b95><li data-v-48e46b95>Points awarded for individual &amp; team performance each game</li><li data-v-48e46b95>Points for all competitive games</li><li data-v-48e46b95>Stats taken from manager score sheets at Port of Call</li><li data-v-48e46b95>Team performance points given to anyone who plays</li><li data-v-48e46b95>Player assigned to team they played most for last season</li><li data-v-48e46b95>Players with &quot;?&quot; have poor availability in first half</li></ul></div><div class="rule-card" data-v-48e46b95><h3 data-v-48e46b95>Winter Wildcard</h3><p data-v-48e46b95> No transfers during the season, but you&#39;ll get a <strong data-v-48e46b95>Winter Wildcard</strong> during the winter break to pick a completely new team for the second half! Prices will be adjusted based on first-half performance. </p></div><div class="rule-card" data-v-48e46b95><h3 data-v-48e46b95>Submit Your Team</h3><p data-v-48e46b95>Send your completed team to:</p><ul class="contact-list" data-v-48e46b95><li data-v-48e46b95>📱 +447818455491</li><li data-v-48e46b95>✉️ Alexanderhillbusiness@outlook.com</li></ul></div></div>',1),Je=[Qe];function Xe(r,d){return h(),x("div",Ke,Je)}const Ze=A(je,[["render",Xe],["__scopeId","data-v-48e46b95"]]),ea=r=>(D("data-v-e8cac047"),r=r(),G(),r),aa={class:"container"},ta={class:"actions"},la={class:"show-extended"},sa=ea(()=>s("p",null,"All data",-1)),oa={__name:"StatsTab",props:["players"],setup(r){const d=r,c=K(),i=Q(),e=["All","GK","DEF","MID","FOR"],n=["All","1","2","3","4","New"],p=N(c.query.position||e[0]),y=N(c.query.team||n[0]),$=N(c.query.extended==="true"||!1),k=N(!1),o=N(400);let g=[],m=null;const V=[{field:"playerName",header:"Player",default:!0},{field:"position",header:"Position",default:!0},{field:"team",header:"Team",default:!0},{field:"price",header:"Price",default:!0},{field:"totalPoints",header:"Total Pts",default:!0},{field:"pointsPerGame",header:"PPG",default:!1},{field:"gamesPlayed",header:"Games",default:!1},{field:"goals",header:"Goals",default:!1},{field:"assists",header:"Assists",default:!1},{field:"motmVotes",header:"MOTM",default:!1},{field:"cleanSheets",header:"CS",default:!1},{field:"yellowCards",header:"YC",default:!1},{field:"redCards",header:"RC",default:!1}],E=V.filter(t=>t.default),_=(t,v)=>t||g.includes(v)?(g.includes(v)||g.push(v),!0):!1,f=P(()=>{const t=p.value==="All"?null:p.value,v=y.value==="All"?null:y.value==="New"?"NEW":y.value;if(!d.players||d.players.length===0)return[];let T=[...d.players];return t&&(T=T.filter(b=>b.position===t)),v&&(T=T.filter(b=>b.team===v)),T.map(b=>{var M;return{...b,playerName:((M=b.playerName)==null?void 0:M.replace("?",""))||"",position:b.position||"",team:b.team||"",price:b.price||"£0",totalPoints:b.totalPoints||"0",pointsPerGame:b.pointsPerGame||"0.0",gamesPlayed:b.gamesPlayed||"0",goals:b.goals||"0",assists:b.assists||"0",motmVotes:b.motmVotes||"0",cleanSheets:b.cleanSheets||"0",yellowCards:b.yellowCards||"0",redCards:b.redCards||"0"}})}),l=()=>{try{const t=document.querySelector(".container"),v=document.querySelector(".actions");if(!t||!v)return 400;const T=t.getBoundingClientRect(),b=v.getBoundingClientRect(),W=window.innerHeight-b.bottom-32;return Math.max(300,Math.min(W,800))}catch(t){return console.warn("Error calculating table height:",t),400}},a=()=>{const t=l();t!==o.value&&(o.value=t)};return H([p,y,$],()=>{const t={...c.query};p.value!==e[0]?t.position=p.value:delete t.position,y.value!==n[0]?t.team=y.value:delete t.team,$.value?t.extended="true":delete t.extended,i.push({path:"/team-picker",query:t})}),H(()=>f.value.length,async()=>{await q(),setTimeout(()=>{a()},50)}),j(async()=>{if(await q(),setTimeout(()=>{a()},100),window.ResizeObserver){m=new ResizeObserver(()=>{a()});const t=document.querySelector(".container");t&&m.observe(t)}window.addEventListener("resize",a)}),he(()=>{m&&m.disconnect(),window.removeEventListener("resize",a)}),(t,v)=>(h(),x("div",aa,[s("div",ta,[S(u(I),{modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=T=>p.value=T),options:e,allowEmpty:!1},null,8,["modelValue"]),S(u(I),{modelValue:y.value,"onUpdate:modelValue":v[1]||(v[1]=T=>y.value=T),options:n,allowEmpty:!1},null,8,["modelValue"]),s("div",la,[sa,S(u(ae),{modelValue:$.value,"onUpdate:modelValue":v[2]||(v[2]=T=>$.value=T)},null,8,["modelValue"])])]),k.value?C("",!0):(h(),x(z,{key:0},[_($.value,"playersExtended")?(h(),w(R,{key:`extended-${p.value}-${y.value}-${f.value.length}`,data:f.value,columns:V,tableHeight:o.value,display:$.value,sortable:!0},null,8,["data","tableHeight","display"])):C("",!0),_(!$.value,"playersDefault")?(h(),w(R,{key:`default-${p.value}-${y.value}-${f.value.length}`,data:f.value,columns:u(E),tableHeight:o.value,display:!$.value,sortable:!1},null,8,["data","columns","tableHeight","display"])):C("",!0)],64))]))}},ra=A(oa,[["__scopeId","data-v-e8cac047"]]),F=r=>(D("data-v-cc0b0608"),r=r(),G(),r),na={class:"minimal-picker"},ia={class:"input-group"},da=F(()=>s("label",null,[s("strong",null,"Team Name")],-1)),ua={class:"validation-container"},ca={class:"budget-display"},ma={class:"input-group"},pa=F(()=>s("label",null,[s("strong",null,"Goalkeeper")],-1)),fa={class:"selected-players"},va={class:"input-group"},ha=F(()=>s("label",null,[s("strong",null,"Defenders")],-1)),ya={class:"selected-players"},ga={class:"input-group"},ba=F(()=>s("label",null,[s("strong",null,"Midfielders")],-1)),_a={class:"selected-players"},$a={class:"input-group"},ka=F(()=>s("label",null,[s("strong",null,"Attackers")],-1)),Pa={class:"selected-players"},Sa={class:"input-group"},Ta=F(()=>s("label",null,[s("strong",null,"Captain (2x Points)")],-1)),wa={class:"input-group"},Na=F(()=>s("label",null,[s("strong",null,"12th Man")],-1)),Va={__name:"PickerTab",props:["players","selectedTeam","teamValidation"],emits:["update-team","export-team"],setup(r,{emit:d}){const c=r,i=d,e=N({teamName:"",defenders:[],midfielders:[],attackers:[],goalkeeper:null,captain:null,twelfthMan:null}),n=P(()=>c.players.filter(l=>l.position==="DEF").map(l=>({...l,displayName:`${l.playerName} (${l.price}, Team ${l.team})`}))),p=P(()=>c.players.filter(l=>l.position==="MID").map(l=>({...l,displayName:`${l.playerName} (${l.price}, Team ${l.team})`}))),y=P(()=>c.players.filter(l=>l.position==="FOR").map(l=>({...l,displayName:`${l.playerName} (${l.price}, Team ${l.team})`}))),$=P(()=>c.players.filter(l=>l.position==="GK").map(l=>({...l,displayName:`${l.playerName} (${l.price}, Team ${l.team})`}))),k=P(()=>{const l=[...e.value.defenders,...e.value.midfielders,...e.value.attackers];return e.value.goalkeeper&&l.push(e.value.goalkeeper),l}),o=P(()=>{const l=k.value.map(a=>a.playerName);return[{playerName:"Yourself (Free)",displayName:"Yourself (Free)",position:"SELF",team:"SELF",price:"£0"},...c.players.filter(a=>a.team==="NEW"&&!l.includes(a.playerName)).map(a=>({...a,displayName:`${a.playerName} (Team ${a.team})`}))]}),g=P(()=>{const l=k.value,a=l.length;if(!e.value.teamName.trim())return{valid:!1,message:"Enter a team name"};if(!e.value.goalkeeper)return{valid:!1,message:"Select a goalkeeper"};if(a===0)return{valid:!1,message:"Select some players"};if(a!==11)return{valid:!1,message:`Select 11 players (currently ${a})`};const t=e.value.defenders.length,v=e.value.midfielders.length,T=e.value.attackers.length;if(t<3||t>5)return{valid:!1,message:"Select 3-5 defenders"};if(v<3||v>5)return{valid:!1,message:"Select 3-5 midfielders"};if(T<1||T>3)return{valid:!1,message:"Select 1-3 attackers"};const b=l.reduce((O,ne)=>O+parseFloat(ne.price.replace("£","")),0);if(b>100)return{valid:!1,message:`Over budget: £${b}/£100`};const M={},W=l.filter(O=>O.team==="NEW").length;return l.forEach(O=>{O.team!=="NEW"&&(M[O.team]=(M[O.team]||0)+1)}),W<1?{valid:!1,message:"Select at least 1 NEW player"}:Math.max(...Object.values(M),0)>4?{valid:!1,message:"Max 4 players from one team"}:Object.keys(M).length<4?{valid:!1,message:"Select players from all 4 teams"}:e.value.captain?e.value.twelfthMan?{valid:!0,message:"Your team is valid!"}:{valid:!1,message:"Select a 12th man"}:{valid:!1,message:"Select a captain"}}),m=P(()=>g.value.valid),V=P(()=>g.value.message),E=P(()=>k.value.reduce((a,t)=>a+parseFloat(t.price.replace("£","")),0).toFixed(2)),_=()=>{const l={...e.value,players:k.value,formation:f()};i("update-team",l)},f=()=>{const l=e.value.defenders.length,a=e.value.midfielders.length,t=e.value.attackers.length;return`${l}-${a}-${t}`};return H(()=>c.selectedTeam,l=>{l&&(e.value.teamName=l.teamName||"",e.value.captain=l.captain,e.value.twelfthMan=l.twelfthMan,l.players&&(e.value.defenders=l.players.filter(a=>a.position==="DEF"),e.value.midfielders=l.players.filter(a=>a.position==="MID"),e.value.attackers=l.players.filter(a=>a.position==="FOR"),e.value.goalkeeper=l.players.find(a=>a.position==="GK")||null))},{immediate:!0,deep:!0}),(l,a)=>(h(),x("div",na,[s("div",ia,[da,S(u(Te),{modelValue:e.value.teamName,"onUpdate:modelValue":a[0]||(a[0]=t=>e.value.teamName=t),placeholder:"Enter your team name",onInput:_},null,8,["modelValue"])]),s("div",ua,[s("div",{class:le(["validation-message",{valid:m.value,invalid:!m.value}])},[s("strong",null,L(m.value?"":"Invalid Team: "),1),ye(" "+L(V.value),1)],2),s("div",ca," £"+L(100-E.value),1)]),S(u(se),{label:"Copy Team to Clipboard",icon:"pi pi-copy",disabled:!m.value,onClick:a[1]||(a[1]=t=>l.$emit("export-team")),class:"export-btn"},null,8,["disabled"]),s("div",ma,[pa,S(u(I),{modelValue:e.value.goalkeeper,"onUpdate:modelValue":a[2]||(a[2]=t=>e.value.goalkeeper=t),options:$.value,optionLabel:"displayName",placeholder:"Select goalkeeper",onChange:_,class:"position-select"},null,8,["modelValue","options"]),s("div",fa,L(e.value.goalkeeper?`🥅 ${e.value.goalkeeper.playerName}`:"None selected"),1)]),s("div",va,[ha,S(u(B),{modelValue:e.value.defenders,"onUpdate:modelValue":a[3]||(a[3]=t=>e.value.defenders=t),options:n.value,optionLabel:"displayName",placeholder:"Select defenders",onChange:_,maxSelectedLabels:0,selectedItemsLabel:"{0} defenders selected",class:"position-select"},null,8,["modelValue","options"]),s("div",ya,L(e.value.defenders.length>0?`🛡️ ${e.value.defenders.map(t=>t.playerName).join(", ")}`:"None selected"),1)]),s("div",ga,[ba,S(u(B),{modelValue:e.value.midfielders,"onUpdate:modelValue":a[4]||(a[4]=t=>e.value.midfielders=t),options:p.value,optionLabel:"displayName",placeholder:"Select midfielders",onChange:_,maxSelectedLabels:0,selectedItemsLabel:"{0} midfielders selected",class:"position-select"},null,8,["modelValue","options"]),s("div",_a,L(e.value.midfielders.length>0?`⚽ ${e.value.midfielders.map(t=>t.playerName).join(", ")}`:"None selected"),1)]),s("div",$a,[ka,S(u(B),{modelValue:e.value.attackers,"onUpdate:modelValue":a[5]||(a[5]=t=>e.value.attackers=t),options:y.value,optionLabel:"displayName",placeholder:"Select attackers",onChange:_,maxSelectedLabels:0,selectedItemsLabel:"{0} attackers selected",class:"position-select"},null,8,["modelValue","options"]),s("div",Pa,L(e.value.attackers.length>0?`🎯 ${e.value.attackers.map(t=>t.playerName).join(", ")}`:"None selected"),1)]),s("div",Sa,[Ta,S(u(I),{modelValue:e.value.captain,"onUpdate:modelValue":a[6]||(a[6]=t=>e.value.captain=t),options:k.value,optionLabel:"displayName",placeholder:"Select captain",onChange:_},null,8,["modelValue","options"])]),s("div",wa,[Na,S(u(I),{modelValue:e.value.twelfthMan,"onUpdate:modelValue":a[7]||(a[7]=t=>e.value.twelfthMan=t),options:o.value,optionLabel:"displayName",placeholder:"Select 12th man",onChange:_},null,8,["modelValue","options"])])]))}},Ca=A(Va,[["__scopeId","data-v-cc0b0608"]]),xa=r=>(D("data-v-f4affb5e"),r=r(),G(),r),Ea={class:"modal-overlay"},Ma={class:"modal-container"},La=xa(()=>s("div",{class:"title"},[s("img",{src:oe,alt:"logo"}),s("span",{class:"text"},[s("h1",null,"Team Builder")])],-1)),Oa={class:"tab-content"},Ha=["Rules","Player Stats","Pick Team"],Aa={__name:"TeamPicker",setup(r){const d=Q(),c=K(),i=N(c.query.tab||"Rules"),e=N([]),n=N({teamName:"",defenders:[],midfielders:[],attackers:[],players:[],captain:null,twelfthMan:null,formation:"4-4-2"}),p=P(()=>({isValid:()=>!0})),y=o=>{n.value={...n.value,...o}},$=()=>{const o=n.value,g=o.formation||"Custom",m=[];o.goalkeeper&&m.push(o.goalkeeper),o.defenders&&m.push(...o.defenders),o.midfielders&&m.push(...o.midfielders),o.attackers&&m.push(...o.attackers);const V=m.map(a=>`${a.playerName} (${a.position}, ${a.team}, ${a.price})`).join(`
`),E=o.captain?`${o.captain.playerName} (${o.captain.position}, ${o.captain.team})`:"Not selected",_=o.twelfthMan?`${o.twelfthMan.playerName}`:"Not selected",f=m.reduce((a,t)=>a+parseFloat(t.price.replace("£","")),0),l=`TEAM SUBMISSION - ${o.teamName||"Unnamed Team"}

Formation: ${g}
Total Cost: £${f.toFixed(2)}

PLAYERS:
${V}

CAPTAIN: ${E}
12TH MAN: ${_}
`;navigator.clipboard.writeText(l).then(()=>{console.log("Team copied to clipboard!")}).catch(a=>{console.error("Failed to copy team to clipboard:",a)})},k=()=>{d.push("/?tab=Teams&season=25/26")};return H(i,o=>{d.push({path:"/team-picker",query:{tab:o}})}),j(async()=>{c.query.tab||d.push({path:"/team-picker",query:{tab:i.value}});try{const o="/torps-fpl/player_picker.csv";console.log("Loading CSV from:",o);const g=await fetch(o);if(!g.ok)throw new Error(`HTTP ${g.status}: ${g.statusText}`);const V=(await g.text()).split(`
`),E=V[0].split("	");e.value=V.slice(1).filter(_=>_.trim()).map(_=>{const f=_.split("	");return{playerName:f[0],position:f[1],team:f[2],price:f[3],totalPoints:f[4]||"0",pointsPerGame:f[5]||"0",gamesPlayed:f[6]||"0",motmVotes:f[7]||"0",goals:f[8]||"0",assists:f[9]||"0",cleanSheets:f[10]||"0",yellowCards:f[11]||"0",redCards:f[12]||"0"}}),console.log(`Loaded ${e.value.length} players`)}catch(o){console.error("Failed to load player data:",o),console.error("VITE_FILE_ROOT:","/torps-fpl/")}}),(o,g)=>(h(),x("div",Ea,[s("div",Ma,[s("button",{class:"close-button",onClick:k,"aria-label":"Close"}," × "),La,S(u(te),{modelValue:i.value,"onUpdate:modelValue":g[0]||(g[0]=m=>i.value=m),options:Ha,allowEmpty:!1,class:"selector"},null,8,["modelValue"]),s("div",Oa,[i.value==="Rules"?(h(),w(Ze,{key:0})):C("",!0),i.value==="Player Stats"?(h(),w(ra,{key:1,players:e.value},null,8,["players"])):C("",!0),i.value==="Pick Team"?(h(),w(Ca,{key:2,players:e.value,selectedTeam:n.value,teamValidation:p.value,onUpdateTeam:y,onExportTeam:$},null,8,["players","selectedTeam","teamValidation"])):C("",!0)])])]))}},Fa=A(Aa,[["__scopeId","data-v-f4affb5e"]]),Ia=[{path:"/",name:"main",component:ze},{path:"/team-picker",name:"team-picker",component:Fa}],Ra=ge({history:be(),routes:Ia}),Ua=ie(de,{semantic:{transitionDuration:"0.05s",primary:{50:"{orange.50}",100:"{orange.100}",200:"{orange.200}",300:"{orange.300}",400:"{orange.400}",500:"{orange.500}",600:"{orange.600}",700:"{orange.700}",800:"{orange.800}",900:"{orange.900}",950:"{orange.950}"},colorScheme:{light:{surface:{0:"#fffdf9",50:"{orange.50}",100:"{orange.100}",200:"{orange.200}",300:"{orange.300}",400:"{orange.400}",500:"{orange.500}",600:"{orange.600}",700:"{orange.700}",800:"{orange.800}",900:"{orange.900}",950:"{orange.950}"},formField:{disabledBackground:"#f5f5f5",disabledColor:"#b3b3b3"},text:{color:"#000"}}}}}),X=ce(Ce);X.use(Ra);X.mount("#app");X.use(we,{theme:{preset:Ua,options:{darkModeSelector:".fake-dark-selector"}}});
